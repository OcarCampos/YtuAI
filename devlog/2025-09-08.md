# Devlog for 2025-09-08

## Session Summary

This session focused on a comprehensive overhaul of the VanilAI project, including codebase cleanup, implementing new features, and creating thorough documentation. All tasks from the previous devlog have been completed.

## Changes Made

### 1. Project Initialization & Cleanup

-   **Directory Renamed**: The root project folder `AI-dieter` was renamed to `VanilAI` to better reflect the project's focus.
-   **File Review & Headers**: All `.lua` files in the `USER_AI` directory were reviewed. Standardized headers were added to each file to clarify its purpose and context within the project.
-   **Redundant Files Deleted**: Several obsolete files were removed to clean up the codebase, including `Changelog.txt`, `Mob_ID.lua`, old backup configs, and mercenary-specific files that were unused.
-   **`README.md` Updated**: The main `README.md` was updated with a new, simplified installation guide.

### 2. AI Behavior Enhancements

-   **Suicide Tactic Enabled**: The `EnableSuicideTactic` was turned on in `H_Config.lua` for testing.
-   **Caprice Skill Logic**: The logic for the Vanilmirth's `Caprice` skill in `H_Skills.lua` was modified. The `min_mob_count` condition was removed, making the skill's use dependent only on SP. This should result in more aggressive and consistent skill usage.
-   **HP-Based Recovery System**: A new flee-and-recover system was implemented.
    -   Added a `RecoverHP` setting to `H_Config.lua`.
    -   Modified `AI_main.lua` to make the homunculus enter a passive recovery mode after fleeing, only re-engaging in combat once its HP is above the `RecoverHP` threshold.

### 3. Documentation & Project Rules

-   **New Documentation Created**: A new, comprehensive documentation file was created at `documentation/VanilAI_Documentation.md`. It includes sections on installation, file structure, configuration, and core AI systems.
-   **`windsurfrules` Updated**: The project's `windsurfrules` file was completely replaced with a new set of rules tailored for a Lua-based AI project, providing better context for future development.

## Next Steps

-   The AI is now ready for a testing phase to ensure all new features are working as expected and that no regressions were introduced.
-   Awaiting feedback from testing before proceeding with the next development cycle.

## Feedback

### Files and folders

- Current project status works and is running at the development machine. I tested the complete VanilAI project in a different machine, I just replaced the default AI file and USER_AI folder in this new machine and the AI works out of the box, confirming that we don't need to download the original AzzyAI nor other file to make our project work out of the box. We could create a release with the project as it is now if we need to.
- Rename project from VanilAI to YtuAI. Reflect the name at the main readme and VanilAI_Documentation.md file too and everywhere where we refer to our project with this new name.
- It seems to me that the files inside the folder /USER_AI/data are not really necessary. File dummy.txt says "This included because some unzipping software does not extract empty folders, and lua can't create the data folder if it's missing. This file may be deleted after installation.". So it seems that we need to have this folder and this dummy file inside so the folder gets created upon unzipping the project at the location. Then, when game is launched it will cretae the H_XXXXXTimeouts.lua files and the H_XXXXX.txt files. I have come upon this conclussion after testing our custom AI and could notice that a file H_1381942Timeouts.lua was created and it had some content in it. Also a file test.txt was created and it was empty. Both files were created at the same time so I suspect the test.txt file was created to validate we had access to the data folder and once this was succesfull the H_1381942Timeouts.lua file was created. We should inspect our codebase to find our where this function comes from and once we find it, then understand the process so we can take a desition regarding the other files because possibly we could just leave the folder empty with the dummy.txt file only and release our AI without all the other files inside that folder. In a similar way we have the file testM.txt, which may relate to the mercenaries and may be under the same logic of the test.txt file.
- Given that we have already created our own documentation for the project, we should get rid of /USER_AI/Documentation.pdf and /USER_AI/Documentation.md. Our own version is located at /documentation/VanilAI_Documentation.md.
- I am not fully sure about what to do with AzzyAIConfig.exe. This file is a GUI interface for configuring H_Config.lua and M_Config.lua files. It was used to configure the original Azzy AI, but given our modifications it may not work anymore. Also, the file is an exe file, which is not really optimal and may cause distrust. If on the long run we will allow the users to customize the AI, we should come up with a better approch to allow the user to do so. For now we must decide what to do with this executable. In regards of the UI to configure the AI, this is work for the future as we need to reach a stable AI so we can create the first release.


### Behavior

- In terms of casting times, I could notice how the homunculs tries to cast rapidly several times in a row the caprice skill. But despite doing this, the caprice skills has a delay which is calulated using the following formula:
    - Cast Delay: 2 + (Skill Level Ã— 0.2) seconds
  We should optimize the attemps to cast the skill done by the homunculus and not brute force our way to cast the skill.
- In terms of strategies of when to cast the skill, I could notice how with our current configuration caprice is being used as soon as the homunculus sees monsters and uses it until it reaches his estipulated SP limit. This is fine and useful, but until some extent. This strategy early in the game is not optimal as the homunculus uses his SP too fast and runs out of it so then it must resort to melee attacks quite fast. I think we can improve this strategy. I think we should use it more in the beginning but as we start to run out of SP we should lower the usage of caprice. We should be more sensitive under certain conditions. And then be conservative and use it only if strictly necessary if we are too short on SP. When we recover SP, we should recover until a certain level to repeat this, but as we recover, we should be allowed to use it under certain conditions too, specially if we are overcrowded, maybe 3 or more monsters. We could also have a scale to raise upwards our SP until we reach a safe level to use it aggresively and then repeat until we need to recover again. By this I mean we should create a smart usage of our SP resource. This could be defined porcentages, or maybe something more complex that accounts amounts of monsters or other conditions. Analyze this and assess if it possible to implement.
- So far the AI is working as expected. The movements are fluid and besides SP usage, the AI is surviving more than before with our customization. We are doing good job in improving the AI to the current mechanics of the game but we still could improve some more the behavior. I will keep using the AI and give you feedbacks as I progress through the games to harder monsters.
