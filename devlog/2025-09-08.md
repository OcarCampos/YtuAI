# Devlog for 2025-09-08

## Session Summary

This session focused on a comprehensive overhaul of the VanilAI project, including codebase cleanup, implementing new features, and creating thorough documentation. All tasks from the previous devlog have been completed.

## Changes Made

### 1. Project Initialization & Cleanup

-   **Directory Renamed**: The root project folder `AI-dieter` was renamed to `VanilAI` to better reflect the project's focus.
-   **File Review & Headers**: All `.lua` files in the `USER_AI` directory were reviewed. Standardized headers were added to each file to clarify its purpose and context within the project.
-   **Redundant Files Deleted**: Several obsolete files were removed to clean up the codebase, including `Changelog.txt`, `Mob_ID.lua`, old backup configs, and mercenary-specific files that were unused.
-   **`README.md` Updated**: The main `README.md` was updated with a new, simplified installation guide.

### 2. AI Behavior Enhancements

-   **Suicide Tactic Enabled**: The `EnableSuicideTactic` was turned on in `H_Config.lua` for testing.
-   **Caprice Skill Logic**: The logic for the Vanilmirth's `Caprice` skill in `H_Skills.lua` was modified. The `min_mob_count` condition was removed, making the skill's use dependent only on SP. This should result in more aggressive and consistent skill usage.
-   **HP-Based Recovery System**: A new flee-and-recover system was implemented.
    -   Added a `RecoverHP` setting to `H_Config.lua`.
    -   Modified `AI_main.lua` to make the homunculus enter a passive recovery mode after fleeing, only re-engaging in combat once its HP is above the `RecoverHP` threshold.

### 3. Documentation & Project Rules

-   **New Documentation Created**: A new, comprehensive documentation file was created at `documentation/VanilAI_Documentation.md`. It includes sections on installation, file structure, configuration, and core AI systems.
-   **`windsurfrules` Updated**: The project's `windsurfrules` file was completely replaced with a new set of rules tailored for a Lua-based AI project, providing better context for future development.

## Next Steps

-   The AI is now ready for a testing phase to ensure all new features are working as expected and that no regressions were introduced.
-   Awaiting feedback from testing before proceeding with the next development cycle.

## Feedback

### Files and folders

- Current project status works and is running at the development machine. We should test it also in another machine to see if this works. If it does out of the box, we could release it as a stable release with our improvements.
- Rename projecto from VanilAI to Ytu_AI. Reflect the name at the main readme and VanilAI_Documentation.md file too.
- It seems to me that the files inside the folder /USER_AI/data are not really necessary. File dummy.txt says "This included because some unzipping software does not extract empty folders, and lua can't create the data folder if it's missing. This file may be deleted after installation.". So it seems that we need to have this folder and this dummy file inside so the folder gets created upon unzipping the project at the location. Then, when game is launched it will cretae the H_XXXXXTimeouts.lua files and the H_XXXXX.txt files. I have come upon this conclussion after testing our custom AI and could notice that a file H_1381942Timeouts.lua was created and it had some content in it. Also a file test.txt was created and it was empty. Both files were created at the same time so I suspect the test.txt file was created to validate we had access to the data folder and once this was succesfull the H_1381942Timeouts.lua file was created. We should inspect our codebase to find our where this function comes from and once we find it, then understand the process so we can take a desition regarding this files because possibly we could just leave the folder empty with the dummy.txt file only. In a similar way we have the file testM.txt, which may relate to the mercenaries and may be under the same logic of the test.txt file.
- Given that we have already created our own documentation for the project, we should get rid of /USER_AI/Documentation.pdf and /USER_AI/Documentation.md. Our own version is located at /documentation/VanilAI_Documentation.md.
- I am not fully sure about what to do with AzzyAIConfig.exe. This file is a GUI interface for configuring H_Config.lua and M_Config.lua files. It was used to configure the original Azzy AI, but given our modifications it may not work anymore. We must decide what to do with this executable. If we end up deleting it, maybe we should create our own simple GUI interface to configure the AI, but this is work for the future as we can continue tweaking the AI as we have done it until this point. Manually via the config lua files.


### Behavior

- Optimize casting of skills. In our specific case Caprice. I could notice how with our current configuration caprice is being used as soon as the homunculus sees monsters. This is fine, but until some extent. As the homunculus is level 31 now, it uses his SP too fast and runs out of it so then it must resort to melee attack. So we should be a bit more mindful about the skill and SP usage. I think we should use aggresively caprice until SP drops below 50%. Then, below 50% we should implement a sensitive usage of the skill, this is, if the homunculus detects 2 or more monsters in the proximity, it is should then use the skill. If we are facing only one monster then it's fine to attack with melee to save SP. This until SP drops below 10%. Below 10% the homunculus shoud wait till it recovers SP until 80% so it can continue using the skill again. In this way we can avoid SP exhaustion. Analyze this logic and validate if it is optimal. Suggest a better one if you think it is not optimal.

- So far the AI is working as expected. The movements are fluid and besides SP usage, the AI is surviving more than before with our customization. We are doing good job in improving the AI to the current mechanics of the game. 
