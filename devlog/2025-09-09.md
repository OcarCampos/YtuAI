# Devlog for 2025-09-09

## Session Summary

This session focuses on addressing the feedback from the previous testing phase. Key objectives include renaming the project to YtuAI, cleaning up the codebase by removing unnecessary files, and implementing significant improvements to the Homunculus's combat behavior, particularly concerning SP management and skill casting efficiency.

## Changes Made

- **Project Renamed**: The project has been renamed from `VanilAI` to `YtuAI`. All relevant files, including the `README.md` and documentation, have been updated to reflect the new name. Please remember to manually rename the `YtuAI` folder and the documentation file.
- **Codebase Cleanup**: Obsolete files and documentation have been identified for removal from the `USER_AI` directory. The `data` directory has also been analyzed, and unnecessary files have been marked for manual deletion to streamline the project.
- **Optimized Skill Cooldowns**: Implemented a cooldown system in `AI_main.lua` to prevent the AI from spamming skills. This was based on the skill's known formula: `Cooldown = 2 + (Skill Level * 0.2) seconds`. The AI now respects the `Caprice` skill's cooldown, ensuring more efficient and resource-friendly casting.
- **Implemented Smart SP Management**: Replaced the static skill priority system with a dynamic, function-based approach in `H_Skills.lua`. The AI now adjusts its skill usage based on a tiered logic:
    - **Aggressive (SP > 70%)**: High priority for `Caprice`.
    - **Balanced (30% < SP <= 70%)**: Medium priority, balancing skill use and conservation.
    - **Conservative (SP <= 30%)**: Low priority, using the skill only when necessary.
    - **Emergency Override**: High priority if mobbed by three or more enemies, regardless of SP.
- **Documentation Overhaul**: Revised `README.md`, `documentation/YtuAI_Documentation.md`, and the project's rules to reflect the new focus, features, and development workflow.
- **Cleaned Friend List**: Removed the inherited, pre-populated friend list from `A_Friends.lua` to provide a clean, default file for new users.
- **Project-Wide Renaming**: Updated the project name from `VanilAI` to `YtuAI` in all file headers within the `YtuAI/USER_AI` directory for consistency.

## Bug Fixes & Testing (Afternoon Session)

Following the morning's refactor, a testing session revealed a persistent and critical bug that caused the game client to crash. After several attempts to fix symptoms of the issue, the root cause was identified and resolved:

- **Restored Missing `V_SKILLLEVEL` Constant**: The primary cause of the recurring `bad argument #1 to 'GetV'` error was a missing game constant. The `V_SKILLLEVEL` constant was not defined in `Const_.lua`, causing any function that tried to check a skill's level to fail. The constant has been restored, resolving the core issue.

## Next Steps

- The AI has been patched and is undergoing another round of testing to confirm stability.
- Awaiting feedback from the latest testing session.

## Feedback

- (Pending next testing session)
